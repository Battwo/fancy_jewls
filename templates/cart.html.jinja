<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>Cart</title>
</head>

<body class="bg-gray-100 min-h-screen">

    {% include "components/navbar.html.jinja" %}

    <main class="max-w-5xl mx-auto p-6 pt-24">

        <h1 class="text-3xl font-bold mb-6">
            Your Shopping Cart
        </h1>
        {%if cart%}
        {% for x in cart %}
        <div class="grid grid-cols-5 items-center bg-white rounded-lg shadow p-4 mb-4 gap-4">


            <img src="{{ x['Image'] }}" class="h-24 w-24 object-contain rounded border">


            <div class="col-span-2 font-semibold">
                {{ x['Name'] }}
            </div>


            <div class="text-center">
                <form method="post" action="/cart/{{ x['ProductID'] }}/update_qty"
                    class="flex flex-col gap-1 items-center">
                    <input name="qty" type="number" value="{{ x['Quantity'] }}" min="1"
                        class="w-16 border rounded px-2 py-1 text-center">
                    <button type="submit" class="text-sm text-blue-600 hover:underline">
                        Update
                    </button>
                </form>

                <form method="post" action="/cart/{{ x['ProductID'] }}/remove">
                    <button type="submit" class="text-sm text-red-500 hover:underline mt-1">
                        Remove
                    </button>
                </form>
            </div>


            <div class="text-right">
                <div class="font-semibold">${{ x['Price'] }}</div>
                <div class="text-sm text-gray-600">
                    Subtotal: ${{ x['Price'] * x['Quantity'] }}
                </div>
            </div>
        </div>  
        {% endfor %}
        <div class="text-right mt-6">
            <div class="text-xl font-bold">
                <h2>Total: ${{ total}}</h2>
            </div>

        </div>
        <button class="bg-yellow-500 hover:bg-white-600 text-white px-4 py-2 rounded text-sm" type="submit">
            <a href="{{ url_for('checkout') }}" class="checkout-button">Proceed to Checkout</a>
        </button>
        {% else %}
        <p class="text-gray-600">Your cart is empty.</p>
        <a href="/browse" class="text-blue-600 hover:underline">Continue Shopping</a>
        {% endif %}
    </main>

</body>

</html>